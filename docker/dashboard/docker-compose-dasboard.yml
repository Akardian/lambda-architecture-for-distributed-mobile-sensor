version: "3.8"

services:
    grafana:
        image: grafana/grafana:7.1.1
        hostname: grafana
        networks:
            - dashboard-network
        ports:
            - target: 3000
              published: 3000
        environment:
            GF_INSTALL_PLUGINS: "grafana-clock-panel,abhisant-druid-datasource" 
        deploy:
            mode: replicated
            replicas: 1
            placement:
                constraints: [node.role == manager]  # No need to be on the manager (node.hostname == ???                       